description: Call structural variants using LUMPY for a tumor/normal pair. All BAM files must be coordinate-sorted. Also, BAM files must have been sorted, indexed, and duplicate-marked.
args:
    - BAM_FILE:
        default: "Null"
        opts: "-b | --tumor"
        description: "Path to a BAM file."
        required: True
        example: "-b SampleA_Tumor.bam"
    - SPLIT_BAM_FILE:
        default: "Null"
        opts: "-s | --split_reads"
        description: "Path to a BAM file with split reads."
        required: True
        example: "-s SampleA_Tumor_Split.bam"
    - DISCORDANT_BAM_FILE:
        default: "Null"
        opts: "-d | --discordant_reads"
        description: "Path to a BAM file with discordant reads."
        required: True
        example: "-d SampleA_Tumor_Discordant.bam"
    - OUTPUT_FILE:
        default: "Null"
        opts: "-o | --output"
        description: "Name of the output VCF file."
        required: True
        example: "-o SampleA.vcf"
volumes:
    - input_bam_dir:
        description: "Directory where the BAM files are stored."
        permissions: Read
    - input_vcf_dir:
        description: "Directory where the output file will be stored."
        permissions: ReadWrite
command_template: |
    source activate py2.7

    lumpyexpress -B /data/input_bam_dir/"${BAM_FILE}" -S /data/input_bam_dir/"${SPLIT_BAM_FILE}" \
        -D /data/input_bam_dir/"${DISCORDANT_BAM_FILE}" -o /data/input_vcf_dir/"${OUTPUT_FILE}" \
        -T /tmp/"${OUTPUT_FILE%%.*}".XXXXXXXXXXXXXXX
receipt_commands: |
    get_bash_version
    get_conda_version lumpy