description: Add or replace read group information in BAM file.
args:
    - INPUT_BAM_FILE:
        default: "Null"
        opts: "-i | --input"
        description: "Name of the input BAM file."
        example: "-b SampleA.bam"
    - SAMPLE:
        default: "Null"
        opts: "-s | --sample"
        description: "Name of the sample."
        example: "-s SampleA"
    - GROUP_ID:
        default: "Null"
        opts: "-id | --group_id"
        description: "Group identifier."
        example: "-id SampleA_lane1"
    - GROUP_LB:
        default: "Null"
        opts: "-lb | --library_identifier"
        description: "Library name (often the same as the group identifier)."
        example: "-lb SampleA_lane1"
    - OUTPUT_BAM_FILE:
        default: "Null"
        opts: "-o | --output"
        description: "Name of the output BAM file."
        required: False
        example: "-o SampleA.bam"
volumes:
    - input_bam_dir:
        description: "Directory where the BAM file is stored."
        permissions: Read
    - output_bam_dir:
        description: "Directory where the output BAM file will be stored."
        permissions: ReadWrite
command_template: |
    if [[ "$OUTPUT_BAM_FILE" == "Null"]]
    then
        OUTPUT_BAM_FILE="$INPUT_BAM_FILE"
    fi

    picard AddOrReplaceReadGroups I=/data/input_bam_dir/"${INPUT_BAM_FILE}" O=/data/output_bam_dir/"${OUTPUT_BAM_FILE}" ID="${GROUP_ID}" LB="${GROUP_LB}" SM="${SAMPLE}" PL=ILLUMINA PU=platform
receipt_commands: |
    get_bash_version
    get_conda_version picard